<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>layout</title>
    {% load static %}
    <link rel="stylesheet"  href="{% static "style.css" %} "  >
</head>
<body id="s" class="before">
<div class="before fs">
<form  method = "POST"  id="simple" name="my" action="."  >
    <br>
    <br>
    <br>
    {% csrf_token %}
    {% for j,k in a.items %}
        <div class="xxxx">
        {% for i in k %}
            <input type="radio" id="s_{{i}}"  name="ss_{{i}}" value="{{ i }}" class="x"  />
            <label for="s_{{i}}" >
                <img src="{% static "images\square.png" %}"
                id="{{i}}"
                height="22"
                data-back="{% static "images\square.png" %}"
                data-second="{% static "images\square.png" %}"
                data-front="{% static "images\redsquare.png" %}"
                onmouseover="diffImageTech(this)"
                draggable="false"
                style="-moz-user-select: none;"
                onclick="diffImage(this)"   />
            </label>

        {% endfor %}
        </div>
    <br>
    {% endfor %}
          <input type="button" value="MAZE" onclick="mazee();" />
          <label for="opt1" class="p">
            <input type="radio" name="rdo" id="opt1" value="1" checked="true" />
            <span class="label"></span>BFS
          </label>

          <label for="opt2" class="p">
            <input type="radio" name="rdo" id="opt2" value="2" />
            <span class="label"></span>DFS
          </label>
          <label for="opt3" class="p">
            <input type="radio" name="rdo" id="opt3" value="3" />
            <span class="label"></span>Dijkstra
          </label>
          <label for="opt4" class="p">
            <input type="radio" name="rdo" id="opt4" value="4" />
            <span class="label"></span>A*
          </label>
   <br> <button type="submit" value="save"  >path</button>
</form>

    <div class="button" onclick="gfg()" id="xpo">Visualize</div>
    <br><button type="button" onclick="gb()">reset</div>
<script>
	var count=0;
	var jb="0";
    function gb(){
    window.history.go(-1);
    }
	window.onload = function(){

	var ptt=localStorage.getItem("jb");
	console.log(ptt);
	if (jb=="0"){
   var button = document.getElementById('xpo');
    button.click();
    localStorage.setItem("jb", "0");
}}
    var maze=[5, 37, 41, 42, 43, 45, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 76, 77, 78, 81, 85, 87, 88, 97, 98, 105, 106, 116, 121, 122, 123, 124, 125, 127, 130, 131, 132, 133, 134, 135, 137, 138, 140, 141, 142, 143, 146, 148, 149, 150, 151, 152, 153, 154,  156, 158, 159, 167, 169, 170, 178, 179, 180, 186, 188, 191, 192, 201, 202, 203, 204, 205, 206, 207, 209, 214, 215, 217, 218, 219, 220, 222, 223, 226, 228, 232, 234, 235, 236, 237, 238, 241, 249, 262, 266, 270, 272, 274, 281, 283, 284, 285, 286, 287, 289, 290, 291, 292, 293, 294, 295, 296, 297, 298, 299, 300, 301, 302, 303, 304, 305, 306, 308, 309, 310, 311, 312, 314, 315, 316, 317, 318, 319, 321, 323, 327, 330, 333, 334, 335, 336, 337, 338, 339, 340, 343, 344, 348, 352, 354, 355, 358, 359, 361, 363, 367, 368, 387, 388, 392, 394, 401, 404, 405, 407, 408, 409, 410, 411, 412, 413, 414, 415, 416, 417, 418, 419, 420, 421, 422, 423, 424, 425, 426, 427, 430, 432, 437, 438, 441, 442, 447, 451, 459, 460, 469, 470, 472, 478, 481, 482, 483, 484, 485, 487, 489, 490, 491, 493, 494, 495, 497, 498, 499, 502, 503, 504, 505, 506, 507, 508, 509, 510, 512, 513, 514, 515, 516, 517, 518, 521, 524, 525, 527, 533, 537, 538, 541, 542, 550, 561, 563, 564, 565, 567, 568, 569, 570, 571, 572, 573, 575, 577, 578, 580, 581, 582, 583, 584, 586, 587, 590, 591, 592, 593, 594, 595, 596, 597, 599, 601, 615, 626, 635, 636, 641, 642, 643, 644, 645, 646, 647, 648, 649, 650, 651, 652, 653, 654, 655, 657, 658, 659, 660, 661, 664, 666, 667, 668, 669, 670, 671, 672, 673, 674, 675, 676, 678, 679, 700, 704];
function mazee()
    {
		if (count>2)
		{
		alert("You have created your own maze");
		}
		else{
        for(let i=0;i<maze.length;i++)
        {

		      var h='s_'
		   	  var x=maze[i];
              var input=document.getElementById(h.concat(x));
              input.checked='true';
              input.setAttribute('src',"{% static "images\redsquare.png" %}" );

        }}
    }
    function diffImageTech(img)
	{

		 if (count>=2 && (window.event.which==1))
		{
			if(img.getAttribute('src')==img.getAttribute('data-back')){
		      img.setAttribute('src',"{% static "images\redsquare.png" %}" );
		      var h='s_'
		   	  var x=img.getAttribute('id');
              var input=document.getElementById(h.concat(x));
              input.checked='true';
		      count++;
		      }
	    }

	}


 function diffImage(img)
	{
		if (count==0)
		{
		    var x=img.getAttribute('id');
		    var h='s_'
            var input=document.getElementById(h.concat(x));
	        input.checked='true';
	        input.setAttribute('name','head');
	        img.setAttribute('data-back',"{% static "images\square1.png" %}");
	        img.setAttribute('src', "{% static "images\arrow.png" %}");
	        count=count+1;

		}
		else if (count==1 && img.getAttribute('src')!="{% static "images\arrow.png" %}")
		{
			count++;
			var h='s_'
		   	var x=img.getAttribute('id');
            var input=document.getElementById(h.concat(x));
            input.checked='true';
		   	input.setAttribute('name','end');
			img.setAttribute('data-back',"{% static "images\square1.png" %}");
		    img.setAttribute('src', "{% static "images\circle1.png" %}");

	    }
	    else
	    {
	    if(img.getAttribute('src')==img.getAttribute('data-back')){
		      img.setAttribute('src',"{% static "images\redsquare.png" %}" );
		      var h='s_'
		   	  var x=img.getAttribute('id');
              var input=document.getElementById(h.concat(x));
              input.checked='true';
		      }
	    }
	}
function reset() {
    localStorage.setItem("jb", "1");
    location.reload();
    return false;
}


var bfs = {{ filetojs | safe }}

console.log(bfs)
function gfg()
    {

        var x=document.getElementById(bfs[0]);
        x.setAttribute("src", "{% static "images\arrow.png" %}");
        var x=document.getElementById(bfs[1]);
        x.setAttribute("src", "{% static "images\circle1.png" %}");
        for (let i=0;i<bfs[2].length;i++)
        {
            document.getElementById(bfs[2][i]).setAttribute("src", "{% static "images\redsquare.png" %}");
        }
        for (let i=0;i<(bfs[4].length);i++)
        {
            for(let j=0;j<(bfs[4][i].length);j++)
            {
             setTimeout(function(){
             document.getElementById(bfs[4][i][j]).setAttribute("src", "{% static "images\bluesquare.png" %}");
            },i*12);
            }

        }
        for (let i=0;i<(720);i++)
        {
        if ( i==bfs[0] || i== bfs[1] || document.getElementById(i).getAttribute("src")=="{% static "images\redsquare.png" %}")
        {
        continue;
        }

            setTimeout(function(){
                                    document.getElementById(i).setAttribute("src", "{% static "images\square.png" %}");
                                 },(bfs[4].length + 4)*12);
         }
    setTimeout(function(){
             document.getElementById(bfs[1]).setAttribute("src", "{% static "images\circle1.png" %}");
            },(bfs[4].length + 5 )*12);
        for (let i=0;i<(bfs[3].length);i++)
        {
        if ( bfs[3][i]!=bfs[0] && bfs[3][i]!= bfs[1] )
        {
         setTimeout(function(){
             document.getElementById(bfs[3][i]).setAttribute("src", "{% static "images\bluesquare.png" %}");
            },(bfs[4].length + 5 + i)*12);
        }



        }

    }

    </script>    
</body>
</html>